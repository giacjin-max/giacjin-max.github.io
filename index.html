<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Generatore Markdown Interattivo</title>
<style>
body {
  font-family: Arial, sans-serif;
  margin: 20px;
  background-color: #fafafa;
}
h1 {
  text-align: center;
  color: #222;
}
textarea {
  width: 100%;
  height: 150px;
  margin: 10px 0;
  font-family: monospace;
  padding: 8px;
  border-radius: 6px;
  border: 1px solid #ccc;
}
button {
  background-color: #0078d7;
  color: white;
  border: none;
  padding: 10px 18px;
  border-radius: 5px;
  font-size: 16px;
  cursor: pointer;
  margin-right: 8px;
}
button:hover {
  background-color: #005fa3;
}
#output {
  background: white;
  border: 1px solid #ddd;
  padding: 12px;
  border-radius: 6px;
  white-space: pre-wrap;
  font-family: monospace;
}
#preview a {
  color: #0078d7;
  text-decoration: none;
}
#preview a:hover {
  text-decoration: underline;
}
</style>
</head>
<body>

<h1>üîó Generatore Markdown Interattivo</h1>

<h3>Titoli (uno per riga)</h3>
<textarea id="titles" placeholder="Incolla qui i titoli..."></textarea>

<h3>Link corrispondenti (uno per riga)</h3>
<textarea id="links" placeholder="Incolla qui i link..."></textarea>

<button onclick="generateMarkdown()">Genera Markdown</button>
<button onclick="copyMarkdown()">üìã Copia Markdown</button>

<h3>Markdown generato</h3>
<pre id="output"></pre>

<h3>Anteprima</h3>
<div id="preview"></div>

<script>
function generateMarkdown() {
  const titles = document.getElementById("titles").value.trim().split("\n");
  const links = document.getElementById("links").value.trim().split("\n");

  if (titles.length !== links.length) {
    alert("‚ö†Ô∏è Il numero di titoli e link deve essere uguale!");
    return;
  }

  // Creiamo un array di coppie
  let pairs = titles.map((t, i) => ({ title: t.trim(), link: links[i].trim() }));

  // Ordine alfabetico (cinese per pinyin simulato, italiano per titolo)
  pairs.sort((a, b) => a.title.localeCompare(b.title, 'zh-Hans-CN'));

  // Raggruppa per lettera iniziale
  let markdown = "";
  let currentLetter = "";
  let count = 1;

  pairs.forEach(item => {
    const letter = item.title[0].toUpperCase();
    if (letter !== currentLetter) {
      currentLetter = letter;
      markdown += \n## ${letter}\n;
    }
    markdown += ${count}. [${item.title}](${item.link})\n;
    count++;
  });

  document.getElementById("output").textContent = markdown;

  // Anteprima HTML
  let previewHtml = markdown
    .replace(/^## (.+)$/gm, "<h3>$1</h3>")
    .replace(/\[(.+?)\]\((.+?)\)/g, '<a href="$2" target="_blank">$1</a>')
    .replace(/^\d+\. (.+)$/gm, "<p>$1</p>");
  document.getElementById("preview").innerHTML = previewHtml;
}

function copyMarkdown() {
  const text = document.getElementById("output").textContent;
  navigator.clipboard.writeText(text)
    .then(() => alert("‚úÖ Markdown copiato negli appunti!"))
    .catch(() => alert("‚ùå Errore nella copia."));
}
</script>

</body>
</html>
